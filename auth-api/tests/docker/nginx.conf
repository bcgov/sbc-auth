worker_processes auto;

events {
  worker_connections 512;
}

http {
  server {
    listen 80;

    location /notify-api {
      rewrite ^/notify-api/(.*) /$1 break;
      proxy_pass http://notify:4010/;
    }

    location /bcol-api {
      rewrite ^/bcol-api/api/v1/(.*) /$1 break;
      proxy_pass http://bcol:4010/;
    }

    location /pay-api {
	  if ($request_uri ~* "([^/]*$)" ) {
        set  $last_path_component  $1;
      }

      rewrite ^/pay-api/(.*) /$1 break;
      proxy_set_header  Prefer example=$last_path_component;
      proxy_pass http://pay:4010/;

    }

  }
}
